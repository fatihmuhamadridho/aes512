// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-1.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  user_id      Int      @id @default(autoincrement())
  fullname     String?
  username     String   @unique
  password     String   @default("admin")
  access_token String   @default("")
  first_login  Boolean? @default(true)
}

model Nilai {
  nilai_id        Int               @id @default(autoincrement())
  jum_nilai       Float             @unique
  ket_nilai       String            @db.Text
  AnalisaKriteria AnalisaKriteria[]
}

model Kriteria {
  kd_kriteria     String            @id @unique @db.VarChar(5)
  nm_kriteria     String            @db.VarChar(50)
  bobot_kriteria  Float?            @default(0)
  AnalisaKriteria AnalisaKriteria[]
  NilaiAkhir      NilaiAkhir[]
}

model Alternatif {
  id_karyawan String       @id @unique @db.VarChar(10)
  nama        String       @db.VarChar(50)
  gender      Gender
  NilaiAkhir  NilaiAkhir[]
}

model AnalisaKriteria {
  analisa_kriteria_id    Int      @id @default(autoincrement())
  Kriteria               Kriteria @relation(fields: [kd_kriteria], references: [kd_kriteria], onUpdate: Cascade, onDelete: Cascade)
  kd_kriteria            String   @db.VarChar(5)
  kd_kriteria_pembanding String   @db.VarChar(5)
  Nilai                  Nilai    @relation(fields: [nilai_id], references: [nilai_id], onUpdate: Cascade, onDelete: Cascade)
  nilai_id               Int
}

model NilaiAkhir {
  nilai_akhir_id      Int        @id @default(autoincrement())
  Alternatif          Alternatif @relation(fields: [id_karyawan], references: [id_karyawan], onUpdate: Cascade, onDelete: Cascade)
  id_karyawan         String     @db.VarChar(10)
  Kriteria            Kriteria   @relation(fields: [kd_kriteria], references: [kd_kriteria], onUpdate: Cascade, onDelete: Cascade)
  kd_kriteria         String     @db.VarChar(5)
  skor_alt_kriteria   Float
  jumlah_alt_kriteria Float
}

enum Gender {
  PRIA
  WANITA
}
